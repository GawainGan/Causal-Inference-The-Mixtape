# 2. 概率与回归回顾 (Probability and Regression Review)

数值永远是抽象的，它们没有情感。但是如果你过分施压，即是是数值也有极限
-- Mos Def

## 2.1 基础概率理论 (Basic probability theory)

实践中，因果推断基于从非常简单到极其先进的统计模型。构建这样的模型需要一些基本的概率论知识，那么让我们从一些定义开始。随机过程是可以多次重复且每次都有不同结果的过程。样本空间是随机过程所有可能结果的集合。我们区分离散和连续随机过程如下[表1](#table-1-examples-of-discrete-and-continuous-random-processes)所示。离散过程产生整数，而连续过程则产生分数。

#### Table 1.Examples of discrete and continuous random processes.
| Description    | Type       | Potential outcomes      |
|----------------|------------|-------------------------|
| 12-sided die   | Discrete   | 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12|
| Coin           | Discrete   | Heads, Tails            |
| Deck of cards  | Discrete   | 2♠, 3♠, …, King♠, Ace♠  |
| Gas prices     | Continuous |      P ≥ 0              |

我们用两种方式定义独立事件。第一种是逻辑独立。例如，两个事件发生，但没有理由相信这两个事件会相互影响。当假设它们确实相互影响时，这是一种称为***事后因果谬误***（post hoc ergo propter hoc）的逻辑谬误，意为“因此，由此产生”。这种谬误认为，事件的时间顺序不足以说明第一件事导致了第二件事。

独立事件的第二个定义是统计独立性。我们将用一个有关有无替换抽样(sampling without replacement)的例子来说明后者。以一副随机洗好的扑克牌为例。在52张牌中，第一张牌是A的概率是多少？

<p> 
    $$  \Pr(\text{Ace}) =\dfrac{\text{Count Aces}}{\text{Sample Space}}=\dfrac{4}{52}=   \dfrac{1}{13}=0.077 $$
</p> 

*注： 注释：在一副完整的扑克牌中，共有4张A，包括黑桃A、红心A、梅花A和方块A。因此，从这副牌中随机抽取一张牌，得到一张A的概率是A的总数（4张）除以牌的总数（52张）。这个计算反映了在没有任何先验信息的情况下，抽到一张A的概率。*

样本空间中有52种可能的结果，或随机过程的所有可能结果的集合。在这52种可能的结果中，我们关心A出现的频率。牌堆中有4张A，所以4/52=0.077。

假设第一张牌是A。现在我们再次提出这个问题。如果我们洗牌，那么抽到的下一张牌也是A的概率是多少？由于我们没有进行有替换的抽样，所以概率不再是1/13。我们进行了***无替换的抽样***(sampled without replacement)。因此新的概率是

<p> 
    $$ \Pr\Big(\text{Ace}\mid\text{Card } 1 =\text{Ace}\Big) = \dfrac{3}{51}= 0.059 $$
</p> 

在无替换抽样的情况下，"第一张牌是A"和"如果第一张牌是A，那么第二张牌也是A"这两个事件并不独立。为了让这两个事件变得独立，你需要将A牌放回牌堆并重新洗牌。因此，只有在以下条件下，两个事件A和B才是独立的：

<p> 
    $$ \Pr(A\mid B)=\Pr(A) $$
</p> 

两个独立事件的一个例子可能是在用另一个骰子掷出3后，用一个骰子掷出5。这两个事件是独立的，所以不管我们第一次掷出什么，掷出5的概率始终是0.17。
<p> 
    $$ 1/6 = 0.16\overline{6}  $$
</p> 

但如果我们想知道某个事件发生的概率，而这需要多个事件首先发生怎么办？例如，我们说的是克利夫兰骑士队赢得NBA冠军。2016年，金州勇士队在七场四胜制的季后赛中以3-1领先。勇士队输掉季后赛需要发生什么？骑士队必须连赢三场。在这种情况下，要找到概率，我们必须将所有边际概率的乘积相乘，或`` Pr(·)^n `` ，其中``  Pr(·) `` 是一个事件发生的边际概率，`` n ``是那个事件重复的次数。如果骑士队赢得一场比赛的无条件概率是0.5，并且每场比赛都是独立的，那么骑士队从3-1的劣势中反弹赢得冠军的概率就是每场比赛获胜概率的乘积：

<p> 
    $$ \text{Win probability} =\Pr\big(W,W,W\big)= (0.5)^3= 0.125 $$
</p> 
  
*注：也就是说，骑士队从3-1的劣势反弹赢得系列赛的概率是12.5%。*

再举一个例子，有助于理解。在德州扑克中，每位玩家面朝下发两张牌。当你手里有两张相同的牌时，你说你有两张“口袋牌”。那么，被发到口袋A的概率是多少呢？它是 
<p> 
    $$  \dfrac{4}{52}\times\dfrac{3}{51}=0.0045 $$
</p> 

没错，概率是0.45%。


让我们将我们所讨论的内容形式化，以更一般化的案例来阐述。对于独立事件，要计算联合概率，我们需要将边际概率相乘：

其中 Pr(A,B) 是事件 A 和 B 同时发生的联合概率，Pr(A) 是事件 A 发生的边际概率。

现在，让我们来看一个稍微难一点的应用。使用两个六面骰子掷出7点的概率是多少，它和掷出3点的概率相同吗？为了回答这个问题，我们比较两个概率。我们将使用一个表格来帮助解释直觉。首先，让我们看看使用两个六面骰子掷出7点的所有可能方式。掷两个骰子总共有36种可能的结果（6^2=36）。在[表2.2](#table-2-2-total-number-of-ways-to-get-a-7-with-two-six-sided-dice)  中，我们看到使用两个骰子掷出7点有六种不同的方式。因此，掷出7点的概率是6/36=16.67%。接下来，让我们看看使用两个六面骰子掷出3点的所有方式。[表2.3](#table-2-3-total-number-of-ways-to-get-a-3-using-two-six-sided-dice)  显示，使用两个六面骰子掷出3点只有两种方式。因此，掷出3点的概率是2/36=5.56%。所以，掷出7点和掷出3点的概率是不同的。

#### Table 2.2: Total number of ways to get a 7 with two six-sided dice.
| Die 1 | Die 2 | Outcome |
|-------|-------|---------|
|1|6|7|
|2|5|7|
|3|4|7|
|4|3|7|
|5|2|7|
|6|1|7|

#### Table 2.3: Total number of ways to get a 3 using two six-sided dice.
| Die 1 | Die 2 | Outcome |
|-------|-------|---------|
|1|2|3|
|2|1|3|


## 2.2 事件和条件概率 (Events and conditional probability)
事件和条件概率。在我们讨论表示概率的三种方式之前，我想先介绍一些新的术语和概念：事件(events)和条件概率(conditional probabilities)。设 A 是某个事件，B 是另一个事件。对于两个事件，有四种可能性：

- A 和 B：A 和 B 都发生。
- ∼A 和 B：A 不发生，但 B 发生。
- A 和 ∼B：A 发生，但 B 不发生。
- ∼A 和 ∼B：A 和 B 都不发生。

我将使用几个不同的例子来说明如何表示概率。


## 2.3 概率树 (Probability tree)

让我们想象一个你正在尝试获取驾驶执照的情况。假设为了获得驾驶执照，你必须通过笔试和路考。然而，如果你未通过笔试，就不能参加路考。我们可以在概率树中表示这两个事件。


概率树直观且易于解释<sup id="a1">[1](#f1)</sup>。首先，我们看到通过笔试的概率是0.75，而未通过的概率是0.25。其次，从每个节点分叉出去时，我们可以进一步看到与给定分支相关的概率之和为1.0。联合概率之和也为1.0。这称为全概率定律，等于所有事件A和B发生的联合概率之和：
<p> 
    $$ \Pr(A)=\sum_n Pr(A\cap B_n) $$
</p> 

我们还在驾照树中看到了条件概率的概念。例如，在通过了笔试的条件下，未通过路考的概率表示为 Pr(未通过 | 通过) = 0.45。

<sup id="a0">[0](#f0)</sup>
***
## 笔记

<b>注释 0:</b>
<b id="f0">""</b> [↩](#a0)
<p> </p>

<b>注释 1:</b>
<b id="f1">The set notation $$ \cup $$ means “union” and refers to two events occurring together. 
集合符号 $$ \cup $$ 的意思是 "联合"，指两个事件同时发生。</b> [↩](#a1)
<p> </p>

